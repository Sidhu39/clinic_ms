{% extends "layout.html" %}
{% block content %}
    <div class="header">
        <h1>Doctor Dashboard</h1>
        <p>Welcome, Dr. {{ doctor_name }}</p>
    </div>
    <a href="{{ url_for('routes.index') }}" class="back-btn">&#8592;</a>
    <div class="container">
    <h1>Doctor Home Screen</h1>

    <form method="POST" action="{{ url_for('routes.patient_details', patient_id=1) }}" class="pure-form pure-form-stacked">

        <div class="queue-box">
            <h2>Waiting Queue</h2>
            {% for item in waiting_queue %}
            <div class="queue-item" data-queue="{{ item.appointment_id }}">
                {{ item.appointment_id }}
            </div>
            {% endfor %}
            <input type="hidden" id="item.appointment_id" name="item.appointment_id" required>
        </div>
        <div class="submit-btn">
            <button type="submit" class="pure-button pure-button-primary">Submit</button>
        </div>
    </form>
</div>

<script>
    // JavaScript to handle the selection of a queue item
    document.querySelectorAll('.queue-item').forEach(item => {
        item.addEventListener('click', function() {
            document.querySelectorAll('.queue-item').forEach(i => i.classList.remove('selected'));
            this.classList.add('selected');
            document.getElementById('selected_queue').value = this.getAttribute('data-queue');
        });
    });
</script>

<!--<div class="container">
    <h1>Doctor Home Screen</h1>

    <form method="POST" action="{{ url_for('routes.patient_visit_entry') }}" class="pure-form">
        <div class="queue-container pure-u-1">
            <h3>Waiting Queue</h3>
            {% for item in waiting_queue %}
            <ul class="queue-list">
                <li {% if loop.first %} style="font-weight: bold; font-size: larger;" {% endif %}>
                    <label>
                        <input type="radio" name="queue_id" value="{{ item.appointment.appointment_id }}" required>
                        {{ item.appointment.appointment_id }}
                    </label>
                </li>
            </ul>
            {% endfor %}
        </div>

        <button type="submit" class="pure-button pure-button-primary submit-btn">Submit</button>
    </form>
    </div>

    <div class="footer">
        <p>&copy; 2024 ABC Clinic. All rights reserved.</p>
    </div>
{% endblock %}--->
        <!--</div>
    <div class="content">
        <table class="pure-g">
    <tr>
    <th class="pure-u-1-3">
        <h2>Waiting Queue</h2>
        <table>
            <tr>
                <th class="pure-u-3-5">Queue Number</th>
                <th></th>
                <th class="pure-u-3-1">Action</th>
            </tr>
            {% for item in waiting_queue %}
            <tr {% if loop.first %}style="font-weight: bold; font-size: larger;"{% endif %}>
                <td>{{ item.appointment.appointment_id }}</td>
                <td align='center' class="pure-u-1-8">
                    {% if current_user.role == 'doctor' %}
                    <a href="{{ url_for('routes.appointment_details', appointment_id=item.appointment_id) }}">View Details</a>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </table>
    </div>
    <div>
        <a href="{{ url_for('routes.index') }}">Back to Home Page</a>
    </div>-->